let annualRecurringRevenue=1e7,annualRevenueGrowth=1,runwayValue=1;const values={multiple:5,valuation:5,limitDuration:0,valuationYears:{V2:0,V3:0,V4:0,V5:0},limit:0,discount:8,roi:"15%",warrants:0,costOfWarrants:0,dilution:0,recurClubCost:0,ventureDebtCost:{interestCost:0,warrantCost1:0,warrantCost2:0,warrantCost3:0,warrantCost4:0},equity:{C1:0,C2:0,C3:0,C4:0}};function recalculateValues(){setLimitValue(),setDurationAndDiscountvalue(),capLimit(),setAssumptions(),setYearWiseValuation(),setRecurClubCost(),values.ventureDebtCost.interestCost=evaluatePercentage(values.roi)*values.limit,renderValuesToUi(),renderRecurClubUi(),setWarrantCosts(),renderVentureDebtUi(),setCostOfEquity(),renderEquityUi(),setProjectedGrowth(),setAdditionalGrowth()}function setDurationAndDiscountvalue(){50<annualRevenueGrowth?runwayValue<=3?(values.discount=3.2,values.limitDuration=3):3<runwayValue&&runwayValue<=6?(values.discount=5.6,values.limitDuration=6):6<runwayValue&&runwayValue<=9?(values.discount=7.8,values.limitDuration=9):9<runwayValue&&(values.discount=10,values.limitDuration=12):runwayValue<=3||3<runwayValue&&runwayValue<=6?(values.discount=3.2,values.limitDuration=3):6<runwayValue&&runwayValue<=9?(values.discount=5.6,values.limitDuration=6):9<runwayValue&&runwayValue<=12?(values.discount=7.8,values.limitDuration=9):12<runwayValue&&(values.discount=10,values.limitDuration=12)}function setLimitValue(){4<=runwayValue&&(0<=annualRevenueGrowth&&annualRevenueGrowth<50&&(values.limit=evaluatePercentage(15)*annualRecurringRevenue),50<=annualRevenueGrowth&&annualRevenueGrowth<100&&(values.limit=evaluatePercentage(20)*annualRecurringRevenue),100===annualRevenueGrowth)&&(values.limit=evaluatePercentage(25)*annualRecurringRevenue),runwayValue<4&&(0<=annualRevenueGrowth&&annualRevenueGrowth<50&&(values.limit=evaluatePercentage(10)*annualRecurringRevenue),50<=annualRevenueGrowth&&annualRevenueGrowth<100&&(values.limit=evaluatePercentage(10)*annualRecurringRevenue),100===annualRevenueGrowth)&&(values.limit=evaluatePercentage(10)*annualRecurringRevenue)}function capLimit(){(50<annualRevenueGrowth&&runwayValue<3||annualRevenueGrowth<=50&&runwayValue<=6)&&(values.limitDuration=6,values.limit=3e6,values.discount=3.2)}function setRecurClubCost(){var e=values.limit/(1-evaluatePercentage(values.discount))-values.limit;3===values.limitDuration?values.recurClubCost=4*e:6===values.limitDuration?values.recurClubCost=2*e:9===values.limitDuration?values.recurClubCost=4/3*e:12===values.limitDuration&&(values.recurClubCost=e)}function renderRecurClubUi(){["[rcf='amount-one']","[rcf='amount-two']","[rcf='amount-three']","[rcf='amount-four']"].forEach(e=>{document.querySelector(e).innerHTML="₹"+amountInWords(values.recurClubCost)}),document.querySelector("[recur-club='limit-amount']").innerHTML=amountInWords(values.limit)+" ";document.querySelector("[recur-club='discount-value']").innerHTML=values.discount+"%";var e=document.querySelectorAll("[recur-club-finance='graph']");const t=document.querySelector("[venture-debt-warrant='graph-one']");e.forEach(e=>{e.style.width=t.offsetWidth-7+"px"})}function renderVentureDebtUi(){["[venture-debt='amount-one']","[venture-debt='amount-two']","[venture-debt='amount-three']","[venture-debt='amount-four']"].forEach((e,t)=>{t=numberInWords(values.ventureDebtCost["warrantCost"+(t+1)]+values.ventureDebtCost.interestCost);document.querySelector(e).innerHTML="₹"+t}),document.querySelector("[venture-debt-warrant='graph-four']").style.width="98%";var e=values.ventureDebtCost.warrantCost3/values.ventureDebtCost.warrantCost4,t=values.ventureDebtCost.warrantCost2/values.ventureDebtCost.warrantCost4,a=values.ventureDebtCost.warrantCost1/values.ventureDebtCost.warrantCost4,e=(document.querySelector("[venture-debt ='limit-amount']").innerHTML=amountInWords(values.limit)+" ",document.querySelector("[venture-debt-warrant='graph-three']").style.width=100*e.toFixed(2)+"%",document.querySelector("[venture-debt-warrant='graph-two']").style.width=100*t.toFixed(2)+"%",document.querySelector("[venture-debt-warrant='graph-one']").style.width=100*a.toFixed(2)+"%",(4*evaluatePercentage(values.roi)*values.limit+values.ventureDebtCost.warrantCost4)/(4*values.recurClubCost));document.querySelector("[venture-debt='margin-stat']").innerHTML=e.toFixed(0)+"X"}function renderEquityUi(){["[equity-cost='amount-one']","[equity-cost='amount-two']","[equity-cost='amount-three']","[equity-cost='amount-four']"].forEach((e,t)=>{t=numberInWords(values.equity["C"+(t+1)]);document.querySelector(e).innerHTML="₹"+t}),document.querySelector("[equity-cost='graph-four']").style.width="95%";var e=values.equity.C3/values.equity.C4,t=values.equity.C2/values.equity.C4,a=values.equity.C1/values.equity.C4;document.querySelector("[equity-cost='graph-three']").style.width=100*e.toFixed(2)+"%",document.querySelector("[equity-cost='graph-two']").style.width=100*t.toFixed(2)+"%",document.querySelector("[equity-cost='graph-one']").style.width=100*a.toFixed(2)+"%";document.querySelector("[equity-cost ='limit-amount']").innerHTML=amountInWords(values.limit)+" ";e=values.equity.C4/(4*(values.limit/(1-evaluatePercentage(values.discount))-values.limit));document.querySelector("[equity-cost='margin-stat']").innerHTML=e.toFixed(0)+"X",document.querySelector("[fd-custom-code='equity-dilution-value']").innerHTML=Number(100*values.dilution).toFixed(2)+"%"}function setAssumptions(){values.valuation=values.multiple*annualRecurringRevenue,values.warrants=.2*values.limit/values.valuation,values.costOfWarrants=evaluatePercentage(annualRevenueGrowth)*values.warrants,values.dilution=values.limit/(values.valuation+values.limit)}function setYearWiseValuation(){var e=e=>e*(1+evaluatePercentage(annualRevenueGrowth));values.valuationYears.V2=e(values.valuation),values.valuationYears.V3=e(values.valuationYears.V2),values.valuationYears.V4=e(values.valuationYears.V3),values.valuationYears.V5=e(values.valuationYears.V4)}function setWarrantCosts(){values.ventureDebtCost.warrantCost1=.1*values.limit*evaluatePercentage(annualRevenueGrowth);var{V2:e,V3:t,V4:a}=values.valuationYears;values.ventureDebtCost.warrantCost2=Math.floor(values.warrants*e*evaluatePercentage(annualRevenueGrowth)+values.ventureDebtCost.warrantCost1),values.ventureDebtCost.warrantCost3=Math.floor(values.warrants*t*evaluatePercentage(annualRevenueGrowth)+values.ventureDebtCost.warrantCost2),values.ventureDebtCost.warrantCost4=Math.floor(values.warrants*a*evaluatePercentage(annualRevenueGrowth)+values.ventureDebtCost.warrantCost3)}function setCostOfEquity(){var{V2:e,V3:t,V4:a}=values.valuationYears;values.equity.C1=values.dilution*evaluatePercentage(annualRevenueGrowth)*values.valuation,values.equity.C2=values.dilution*e*evaluatePercentage(annualRevenueGrowth)+values.equity.C1,values.equity.C3=values.dilution*t*evaluatePercentage(annualRevenueGrowth)+values.equity.C2,values.equity.C4=values.dilution*a*evaluatePercentage(annualRevenueGrowth)+values.equity.C3}function evaluatePercentage(e){return Number(e.toString().includes("%")?e.replace("%",""):e)/100}function roundToTwoDigits(e){return(Math.round(100*e)/100).toFixed(2).padStart(4,"0")}function amountInWords(e){var[e,t]=roundToTwoDigits(Number(e)/1e7).toString().split(".");return Number(e)<1?t+"L":e+`.${t}Cr`}function renderValuesToUi(){var e=document.querySelector('[pd-text="limit-amount-words"]'),t=document.querySelector('[pd-text="limit-amount-number"]'),a=document.querySelector('[compare-headline="limit-amount"]'),u=document.querySelector("[pd-custom-code='limit-duration']");e.innerHTML=amountInWords(values.limit)+" ",t.innerHTML=amountInNumber(values.limit),a.innerHTML=amountInWords(values.limit),u.innerHTML=values.limitDuration}function amountInNumber(e){var[e,t]=roundToTwoDigits(Number(e)/1e7).toString().split(".");return e<1?t+",00,000":e+`,${t},00,000`}function roundOff(e){var[e,t]=e.toString().split(".");return Number(t)<50?""+e:e+"."+t}function numberInWords(e){var t,a;return 1e7<=e?(e/1e7).toFixed(1)+"Cr":1e5<=e?(e/1e5).toFixed(1)+"L":1e3<=e?([t,a]=(e/1e3).toFixed(1).split("."),"0"===a?t+"L":t+`.${a}L`):(e/1e3).toFixed(2)}function hideAfterParams(){var e=document.querySelector("[pd-custom-code='hide-after-params']"),t=document.querySelector("[pd-custom-code='show-after-params']");e.style.display="none",t.style.display="block"}function showAndHideElements(){document.querySelectorAll("[pd-custom='hide-after-submit']").forEach(e=>e.style.display="none"),document.querySelectorAll("[pd-custom='show-after-submit']").forEach(e=>{e.style.display="block"})}window.onload=()=>{const u=document.querySelector("[pd-custom-form='annual-recurring-revenue']"),n=document.querySelector("[pd-custom-form='annual-revenue-growth']"),r=document.querySelector("[pd-custom-form='annual-runway']");var e=document.querySelector("[pd-custom-code='loader']"),t=([u,n,r].forEach((e,a)=>{e.addEventListener("input",e=>{var t;0===a?(t=e.target.value,annualRecurringRevenue=1e7*t,100<t?(annualRecurringRevenue=1e9,u.value=100):t<1&&(annualRecurringRevenue=1e7,u.value="")):1===a?(t=e.target.value,100<(annualRevenueGrowth=t)?(annualRevenueGrowth=100,n.value=100):t<1&&(annualRevenueGrowth=1,n.value="")):(t=e.target.value,24<(runwayValue=t)?(runwayValue=24,r.value=24):t<1&&(runwayValue=1,r.value="")),initializeArrSlider(annualRecurringRevenue/1e7),initializeArgSlider(annualRevenueGrowth),initializeRunwaySlider(runwayValue),recalculateValues()})}),new URLSearchParams(window.location.search)),a=t.get("annual_recurring_revenue"),o=t.get("annual_revenue_growth"),t=t.get("annual_runway");a||o||t?(annualRecurringRevenue=a,annualRevenueGrowth=o,runwayValue=t,initializeArrSlider(annualRecurringRevenue/1e7),initializeArgSlider(annualRevenueGrowth),initializeRunwaySlider(runwayValue),recalculateValues(),e.style.display="none",showAndHideElements(),hideAfterParams()):document.querySelector("[data-form='submit-btn']").addEventListener("click",showAndHideElements),e.style.display="none",document.querySelector("[pd-custom-code='after-loading']").style.display="block"};const monthlyRevenue={r1:0,r2:0,r3:0,r4:0,r5:0,r6:0,r7:0,r8:0,r9:0,r10:0,r11:0,r12:0},monthlyRevenuesBars=[...document.querySelectorAll("[pd-custom-code='monthly-revenue']")];function setProjectedGrowth(){monthlyRevenue.r1=annualRecurringRevenue/12,monthlyRevenue.r2=calculateGrowth(monthlyRevenue.r1),monthlyRevenue.r3=calculateGrowth(monthlyRevenue.r2),monthlyRevenue.r4=calculateGrowth(monthlyRevenue.r3),monthlyRevenue.r5=calculateGrowth(monthlyRevenue.r4),monthlyRevenue.r6=calculateGrowth(monthlyRevenue.r5),monthlyRevenue.r7=calculateGrowth(monthlyRevenue.r6),monthlyRevenue.r8=calculateGrowth(monthlyRevenue.r7),monthlyRevenue.r9=calculateGrowth(monthlyRevenue.r8),monthlyRevenue.r10=calculateGrowth(monthlyRevenue.r9),monthlyRevenue.r11=calculateGrowth(monthlyRevenue.r10),monthlyRevenue.r12=calculateGrowth(monthlyRevenue.r11),setGrowthGraph()}const heights=["15","24","40","52","64","76","88","104","118","133","148","160"];let timeoutId;function setGrowthGraph(){clearTimeout(timeoutId),Object.keys(monthlyRevenue).forEach((e,t)=>{var a=generateRandomHeight(heights[t]);monthlyRevenuesBars[t].style.height=a+"px"}),timeoutId=setTimeout(()=>{Object.keys(monthlyRevenue).forEach((e,t)=>{monthlyRevenuesBars[t].style.height=heights[t]+"px"})},200)}function calculateHeightPercentage(e,t){return 100*(e/t).toFixed(2)}const additionalGrowth={r1:0,r2:0,r3:0,r4:0,r5:0,r6:0,r7:0,r8:0,r9:0,r10:0,r11:0,r12:0};function setAdditionalGrowth(){var e=.1*(.33*values.limit);additionalGrowth.r1=0,additionalGrowth.r2=e,additionalGrowth.r3=calculateGrowth(additionalGrowth.r2),additionalGrowth.r4=calculateGrowth(additionalGrowth.r3),additionalGrowth.r5=calculateGrowth(additionalGrowth.r4),additionalGrowth.r6=calculateGrowth(additionalGrowth.r5),additionalGrowth.r7=calculateGrowth(additionalGrowth.r6),additionalGrowth.r8=calculateGrowth(additionalGrowth.r7),additionalGrowth.r9=calculateGrowth(additionalGrowth.r8),additionalGrowth.r10=calculateGrowth(additionalGrowth.r9),additionalGrowth.r11=calculateGrowth(additionalGrowth.r10),additionalGrowth.r12=calculateGrowth(additionalGrowth.r11),setAdditionalGrowthValue()}const allAdditionalGrowths=[...document.querySelectorAll("[pd-custom-code='additional-growth-value']")],additionalGrowthHeights=["5","7","9","10","12","13.5","14.7","15.8","17","18.1","19.2","20.8"];function setAdditionalGrowthValue(){const a=[...document.querySelectorAll("[pd-custom-code='additional-growth-bar']")];Object.keys(additionalGrowth).forEach((e,t)=>{allAdditionalGrowths[t].innerHTML=convertToIndianNumberFormat(additionalGrowth[e]),a[t].style.minHeight=additionalGrowthHeights[t]+"px"})}function calculateGrowth(e){return e*(1+evaluatePercentage(annualRevenueGrowth/12))}function setMonthsName(){var e=getMonths();const a=document.querySelectorAll("[pd-custom-code='month-year']");e.forEach((e,t)=>{a[t].innerHTML=e})}function convertToIndianNumberFormat(e){return 1e7<=e?(e/1e7).toFixed(1)+"Cr":1e5<=e?(e/1e5).toFixed(1)+"L":(e/1e3).toFixed(1)+"K"}function getMonths(){for(var e=new Date,t=e.getMonth(),e=e.getFullYear(),a=new Date(e+1,t,1),u=a.getMonth(),n=[],r=t,o=e;o!==a.getFullYear()||r!==u;){var l=new Date(o,r,1).toLocaleString("default",{month:"short"});n.push(l+"'"+o.toString().slice(2)),11<++r&&(r=0,o++)}return n}function generateRandomHeight(e){return Math.random()<.4?90<Number(e)?Number(e)+100:15===Number(e)?Number(e)+15:Number(e)+26:90<Number(e)?Number(e)-100:15===Number(e)?Number(e)-15:Number(e)-26}function initializeArrSlider(e){document.querySelector("[pd-custom-code='arr-display-value']").innerHTML=e,$("[pd-custom-code='arr-range-slider']").slider({range:"min",min:1,max:100,value:e,slide:function(e,t){t=t.value;annualRecurringRevenue=1e7*t,document.querySelector("[pd-custom-code='arr-display-value']").innerHTML=t,recalculateValues()}})}function initializeArgSlider(e){document.querySelector("[pd-custom-code='arg-display-value']").innerHTML=e,$("[pd-custom-code='arg-range-slider']").slider({range:"min",min:1,max:100,value:e,slide:function(e,t){t=t.value;annualRevenueGrowth=t,document.querySelector("[pd-custom-code='arg-display-value']").innerHTML=t,recalculateValues()}})}function initializeRunwaySlider(e){document.querySelector("[pd-custom-code='runway-display-value']").innerHTML=e,$("[pd-custom-code='runway-range-slider']").slider({range:"min",min:1,max:24,value:e,slide:function(e,t){t=t.value;runwayValue=t,document.querySelector("[pd-custom-code='runway-display-value']").innerHTML=t,recalculateValues()}})}setMonthsName();